<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interface to Macaulay2 • m2r</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interface to Macaulay2">
<meta property="og:description" content="Persistent interface to Macaulay2 &lt;http://www.math.uiuc.edu/Macaulay2/&gt;
    and front-end tools facilitating its use in the R ecosystem.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">m2r</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.907</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/coneill-math/m2r">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="m2r--macaulay2-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#m2r--macaulay2-in-r" class="anchor"></a><strong>m2r</strong> – Macaulay2 in R</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><strong>m2r</strong> is a new R package that provides a persistent connection between <a href="https://www.r-project.org">R</a> and <a href="http://www.math.uiuc.edu/Macaulay2/">Macaulay2 (M2)</a>.</p>
<p>The package grew out of a collaboration at the <a href="http://www.ams.org/programs/research-communities/mrc-16">2016 Mathematics Research Community</a> on algebraic statistics, funded by the <a href="http://www.nsf.gov">National Science Foundation</a> through the <a href="http://www.ams.org/home/page">American Mathematical Society</a>.</p>
<p>If you have a feature request, please file an issue!</p>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p><strong>m2r</strong> is loaded like any other R package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(m2r)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># Loading required package: mpoly</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">#   Please cite m2r! See citation("m2r") for details.</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#   M2 found in /Applications/Macaulay2-1.10/bin</span></span></code></pre></div>
<p>When loaded, <strong>m2r</strong> initializes a persistent connection to a back-end Macaulay2 session. The basic function in R that accesses this connection is <code><a href="reference/m2_call.html">m2()</a></code>, which simply accepts a character string that is run by the Macaulay2 session.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="reference/m2_call.html">m2</a></span>(<span class="st">"1 + 1"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># Starting M2... done.</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># [1] "2"</span></span></code></pre></div>
<p>You can see the persistence by setting variables and accessing them across different <code><a href="reference/m2_call.html">m2()</a></code> calls:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="reference/m2_call.html">m2</a></span>(<span class="st">"a = 1"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"># [1] "1"</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw"><a href="reference/m2_call.html">m2</a></span>(<span class="st">"a"</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># [1] "1"</span></span></code></pre></div>
<p>You can check the variables defined in the M2 session with <code><a href="reference/m2_utility.html">m2_ls()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="reference/m2_utility.html">m2_ls</a></span>()</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co"># [1] "a"</span></span></code></pre></div>
<p>You can also check if variables exist with <code><a href="reference/m2_utility.html">m2_exists()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="reference/m2_utility.html">m2_exists</a></span>(<span class="st">"a"</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># [1] TRUE</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw"><a href="reference/m2_utility.html">m2_exists</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>,<span class="st">"b"</span>))</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># [1]  TRUE FALSE</span></span></code></pre></div>
<p>Apart from the basic connection to M2, <strong>m2r</strong> has basic data structures and methods to reference and manipulate the M2 objects within R. For more on this, see the <strong>m2r</strong> internals section below.</p>
</div>
<div id="rings-ideals-and-grobner-bases" class="section level2">
<h2 class="hasAnchor">
<a href="#rings-ideals-and-grobner-bases" class="anchor"></a>Rings, ideals, and Grobner bases</h2>
<p><strong>m2r</strong> currently has basic support for <a href="https://en.wikipedia.org/wiki/Ring_(mathematics)">rings</a> (think: <a href="https://en.wikipedia.org/wiki/Polynomial_ring">polynomial rings</a>):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>(QQtxyz &lt;-<span class="st"> </span><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"t"</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>))</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># M2 Ring: QQ[t,x,y,z], grevlex order</span></span></code></pre></div>
<p>and <a href="https://en.wikipedia.org/wiki/Ideal_(ring_theory)">ideals</a> of rings:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>(I &lt;-<span class="st"> </span><span class="kw"><a href="reference/ideal.html">ideal</a></span>(<span class="st">"t^4 - x"</span>, <span class="st">"t^3 - y"</span>, <span class="st">"t^2 - z"</span>))</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="co"># M2 Ideal of ring QQ[t,x,y,z] (grevlex) with generators : </span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># &lt; t^4  -  x,  t^3  -  y,  t^2  -  z &gt;</span></span></code></pre></div>
<p>You can compute <a href="https://en.wikipedia.org/wiki/Gr%C3%B6bner_basis">Grobner bases</a> as well. The basic function to do this is <code><a href="reference/gb.html">gb()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="reference/gb.html">gb</a></span>(I)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co"># z^2  -  x</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># z t  -  y</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># -1 z x  +  y^2</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># -1 x  +  t y</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># -1 z y  +  x t</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># -1 z  +  t^2</span></span></code></pre></div>
<p>Perhaps an easier way to do this is just to list off the polynomials as character strings:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw"><a href="reference/gb.html">gb</a></span>(<span class="st">"t^4 - x"</span>, <span class="st">"t^3 - y"</span>, <span class="st">"t^2 - z"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># z^2  -  x</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># z t  -  y</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># -1 z x  +  y^2</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># -1 x  +  t y</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co"># -1 z y  +  x t</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># -1 z  +  t^2</span></span></code></pre></div>
<p>The result is an <code>mpolyList</code> object, from the <a href="https://github.com/dkahle/mpoly"><strong>mpoly</strong> package</a>. You can see the M2 code by adding <code>code = TRUE</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw"><a href="reference/gb.html">gb</a></span>(<span class="st">"t^4 - x"</span>, <span class="st">"t^3 - y"</span>, <span class="st">"t^2 - z"</span>, <span class="dt">code =</span> <span class="ot">TRUE</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co"># m2rintgb00000003 = gb(m2rintideal00000003); gens m2rintgb00000003</span></span></code></pre></div>
<p>You can compute the basis respective of different <a href="https://en.wikipedia.org/wiki/Monomial_order">monomial orders</a> as well. The default ordering is the one in the respective ring, which defaults to <code>grevlex</code>; however, changing the order is as simple as changing the ring.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"t"</span>, <span class="st">"z"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>, <span class="dt">order =</span> <span class="st">"lex"</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co"># M2 Ring: QQ[x,y,t,z], lex order</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="kw"><a href="reference/gb.html">gb</a></span>(<span class="st">"t^4 - x"</span>, <span class="st">"t^3 - y"</span>, <span class="st">"t^2 - z"</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co"># t^2  -  z</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co"># -1 t z  +  y</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># -1 z^2  +  x</span></span></code></pre></div>
<p>On a technical level, <code><a href="reference/ring.html">ring()</a></code>, <code><a href="reference/ideal.html">ideal()</a></code>, and <code><a href="reference/gb.html">gb()</a></code> use <a href="http://adv-r.had.co.nz/Computing-on-the-language.html">nonstandard evaluation rules</a>. A more stable way to use these functions is to use their standard evaluation versions <code><a href="reference/ring.html">ring_()</a></code>, <code><a href="reference/ideal.html">ideal_()</a></code>, and <code><a href="reference/gb.html">gb_()</a></code>. Each accepts first a data structure describing the relevant object of interest first as its own object. For example, at a basic level this simply changes the previous syntax to</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw"><a href="reference/use_ring.html">use_ring</a></span>(QQtxyz)</span>
<span id="cb12-2"><a href="#cb12-2"></a>poly_chars &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"t^4 - x"</span>, <span class="st">"t^3 - y"</span>, <span class="st">"t^2 - z"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="kw"><a href="reference/gb.html">gb_</a></span>(poly_chars)</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># z^2  -  x</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co"># z t  -  y</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co"># -1 z x  +  y^2</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># -1 x  +  t y</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co"># -1 z y  +  x t</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># -1 z  +  t^2</span></span></code></pre></div>
<p><code><a href="reference/gb.html">gb_()</a></code> is significantly easier to code with than <code><a href="reference/gb.html">gb()</a></code> in the sense that its inputs and outputs are more predictable, so we strongly recommend that you use <code><a href="reference/gb.html">gb_()</a></code>, especially inside of other functions and packages.</p>
<p>As far as other kinds of computations are concerned, we present a potpurri of examples below.</p>
<p>Ideal saturation:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"x"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co"># M2 Ring: QQ[x], grevlex order</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>I &lt;-<span class="st"> </span><span class="kw"><a href="reference/ideal.html">ideal</a></span>(<span class="st">"(x-1) x (x+1)"</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="kw"><a href="reference/ideal.html">saturate</a></span>(I, <span class="st">"x"</span>) <span class="co"># = (x-1) (x+1)</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co"># M2 Ideal of ring QQ[x] (grevlex) with generator : </span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co"># &lt; x^2  -  1 &gt;</span></span></code></pre></div>
<p>Radicalization:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>I &lt;-<span class="st"> </span><span class="kw"><a href="reference/ideal.html">ideal</a></span>(<span class="st">"x^2"</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw"><a href="reference/ideal.html">radical</a></span>(I)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># M2 Ideal of ring QQ[x] (grevlex) with generator : </span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># &lt; x &gt;</span></span></code></pre></div>
<p>Primary decomposition:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co"># M2 Ring: QQ[x,y,z], grevlex order</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>I &lt;-<span class="st"> </span><span class="kw"><a href="reference/ideal.html">ideal</a></span>(<span class="st">"x z"</span>, <span class="st">"y z"</span>)</span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="kw"><a href="reference/ideal.html">primary_decomposition</a></span>(I)</span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># M2 List of ideals of QQ[x,y,z] (grevlex) : </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co"># &lt; z &gt;</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co"># &lt; x,  y &gt;</span></span></code></pre></div>
<p>Dimension:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co"># M2 Ring: QQ[x,y], grevlex order</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>I &lt;-<span class="st"> </span><span class="kw"><a href="reference/ideal.html">ideal</a></span>(<span class="st">"y - (x+1)"</span>) </span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="kw"><a href="reference/ideal.html">dimension</a></span>(I)</span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co"># [1] 1</span></span></code></pre></div>
</div>
<div id="factoring-integers-and-polynomials" class="section level2">
<h2 class="hasAnchor">
<a href="#factoring-integers-and-polynomials" class="anchor"></a>Factoring integers and polynomials</h2>
<p>You can compute <a href="https://en.wikipedia.org/wiki/Integer_factorization">prime decompositions</a> of integers with <code><a href="reference/factor_n.html">factor_n()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>(x &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">^</span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span><span class="op">^</span><span class="dv">4</span> <span class="op">*</span><span class="st"> </span><span class="dv">5</span><span class="op">^</span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">7</span><span class="op">^</span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">11</span><span class="op">^</span><span class="dv">1</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># [1] 174636000</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="kw"><a href="reference/factor_n.html">factor_n</a></span>(x)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co"># $prime</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># [1]  2  3  5  7 11</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co"># </span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co"># $power</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co"># [1] 5 4 3 2 1</span></span></code></pre></div>
<p>You can also <a href="https://en.wikipedia.org/wiki/Factorization">factor polynomials</a> over rings using <code><a href="reference/factor_poly.html">factor_poly()</a></code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw"><a href="reference/factor_poly.html">factor_poly</a></span>(<span class="st">"x^4 - y^4"</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co"># $factor</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co"># x  -  y</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co"># x  +  y</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># x^2  +  y^2</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co"># </span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co"># $power</span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="co"># [1] 1 1 1</span></span></code></pre></div>
</div>
<div id="smith-normal-form-of-a-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#smith-normal-form-of-a-matrix" class="anchor"></a>Smith normal form of a matrix</h2>
<p>The Smith normal form of a matrix <em>M</em> here refers to the decomposition of an integer matrix <em>D = PMQ</em>, where <em>D</em>, <em>P</em>, and <em>Q</em> are integer matrices and <em>D</em> is diagonal. <em>P</em> and <em>Q</em> are unimodular matrices (their determinants are -1 or 1), so they are invertible. This is somewhat like a singular value decomposition for integer matrices.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>M &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb19-2"><a href="#cb19-2"></a>   <span class="dv">2</span>,  <span class="dv">4</span>,   <span class="dv">4</span>,</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="dv">-6</span>,  <span class="dv">6</span>,  <span class="dv">12</span>,</span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="dv">10</span>, <span class="dv">-4</span>, <span class="dv">-16</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a></span>
<span id="cb19-7"><a href="#cb19-7"></a>(mats &lt;-<span class="st"> </span><span class="kw"><a href="reference/snf.html">snf</a></span>(M))</span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co"># $D</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co">#      [,1] [,2] [,3]</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co"># [1,]   12    0    0</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="co"># [2,]    0    6    0</span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co"># [3,]    0    0    2</span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co"># M2 Matrix over ZZ[]</span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co"># $P</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">#      [,1] [,2] [,3]</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co"># [1,]    1    0    1</span></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="co"># [2,]    0    1    0</span></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co"># [3,]    0    0    1</span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="co"># M2 Matrix over ZZ[]</span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="co"># $Q</span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="co">#      [,1] [,2] [,3]</span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co"># [1,]    4   -2   -1</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co"># [2,]   -2    3    1</span></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="co"># [3,]    3   -2   -1</span></span>
<span id="cb19-25"><a href="#cb19-25"></a><span class="co"># M2 Matrix over ZZ[]</span></span>
<span id="cb19-26"><a href="#cb19-26"></a>P &lt;-<span class="st"> </span>mats<span class="op">$</span>P; D &lt;-<span class="st"> </span>mats<span class="op">$</span>D; Q &lt;-<span class="st"> </span>mats<span class="op">$</span>Q</span>
<span id="cb19-27"><a href="#cb19-27"></a></span>
<span id="cb19-28"><a href="#cb19-28"></a>P <span class="op">%*%</span><span class="st"> </span>M <span class="op">%*%</span><span class="st"> </span>Q                <span class="co"># = D</span></span>
<span id="cb19-29"><a href="#cb19-29"></a><span class="co">#      [,1] [,2] [,3]</span></span>
<span id="cb19-30"><a href="#cb19-30"></a><span class="co"># [1,]   12    0    0</span></span>
<span id="cb19-31"><a href="#cb19-31"></a><span class="co"># [2,]    0    6    0</span></span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="co"># [3,]    0    0    2</span></span>
<span id="cb19-33"><a href="#cb19-33"></a><span class="kw"><a href="https://rdrr.io/r/base/solve.html">solve</a></span>(P) <span class="op">%*%</span><span class="st"> </span>D <span class="op">%*%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/solve.html">solve</a></span>(Q)  <span class="co"># = M</span></span>
<span id="cb19-34"><a href="#cb19-34"></a><span class="co">#      [,1] [,2] [,3]</span></span>
<span id="cb19-35"><a href="#cb19-35"></a><span class="co"># [1,]    2    4    4</span></span>
<span id="cb19-36"><a href="#cb19-36"></a><span class="co"># [2,]   -6    6   12</span></span>
<span id="cb19-37"><a href="#cb19-37"></a><span class="co"># [3,]   10   -4  -16</span></span>
<span id="cb19-38"><a href="#cb19-38"></a></span>
<span id="cb19-39"><a href="#cb19-39"></a><span class="kw"><a href="https://rdrr.io/r/base/det.html">det</a></span>(P)</span>
<span id="cb19-40"><a href="#cb19-40"></a><span class="co"># [1] 1</span></span>
<span id="cb19-41"><a href="#cb19-41"></a><span class="kw"><a href="https://rdrr.io/r/base/det.html">det</a></span>(Q)</span>
<span id="cb19-42"><a href="#cb19-42"></a><span class="co"># [1] -1</span></span></code></pre></div>
</div>
<div id="m2r-internals-pointers-reference-and-value-functions-and-m2-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#m2r-internals-pointers-reference-and-value-functions-and-m2-objects" class="anchor"></a><strong>m2r</strong> internals: pointers, reference and value functions, and <code>m2</code> objects</h2>
<p>At a basic level, <strong>m2r</strong> works by passing strings between R and M2. Originating at the R side, these strings are properly formated M2 code constructed from the inputs to the R functions. That code goes to M2, is evaluated there, and then “exported” with M2’s function <code>toExternalString()</code>. The resulting string often, but not always, produces the M2 code needed to recreate the object resulting from the evaluation, and in that sense is M2’s version of R’s <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code>. That string is passed back into R and parsed there into R-style data structures, typically <a href="http://adv-r.had.co.nz/OO-essentials.html#s3">S3-classed lists</a>.</p>
<p>The R-side parsing of the external string from M2 is an expensive process because it is currently implemented in R. Consequently (and for other reasons, too!), in some cases you’ll want to do a M2 computation from R, but leave the output in M2. Since you will ultimately want something in R referencing the result, nearly every <strong>m2r</strong> function that performs M2 computations has a pointer version. As a simple naming convention, the name of the function that returns the pointer, called the reference function, is determined by the name of the ordinary function, called the value function, by appending a <code>.</code>.</p>
<p>For example, we’ve seen that <code><a href="reference/factor_n.html">factor_n()</a></code> computes the prime decomposition of a number. The corresponding reference function is <code><a href="reference/factor_n.html">factor_n.()</a></code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>(x &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">^</span><span class="dv">5</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span><span class="op">^</span><span class="dv">4</span> <span class="op">*</span><span class="st"> </span><span class="dv">5</span><span class="op">^</span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">7</span><span class="op">^</span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">11</span><span class="op">^</span><span class="dv">1</span>)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="co"># [1] 174636000</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="kw"><a href="reference/factor_n.html">factor_n.</a></span>(x)</span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co"># M2 Pointer Object</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co">#   ExternalString : new Product from {new Power from {2,5},new Power fro...</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">#          M2 Name : m2o460</span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">#         M2 Class : Product (WrapperType)</span></span></code></pre></div>
<p>All value functions simply wrap reference functions and parse the output with <code><a href="reference/m2_parser.html">m2_parse()</a></code>, a general M2 parser, often followed by a little more parsing. <code><a href="reference/m2_parser.html">m2_parse()</a></code> typically creates an object of class <code>m2</code> so that R knows what kind of thing it is. For example:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="kw"><a href="reference/factor_n.html">factor_n.</a></span>(x))</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co"># [1] "m2_pointer" "m2"</span></span></code></pre></div>
<p>Even more, <code><a href="reference/m2_parser.html">m2_parse()</a></code> often creates objects that have an inheritance structure that references <code>m2</code> somewhere in the middle of its class structure, with specific structure preceding and general structure succeeding (examples below). Apart from its class, the general principle we follow here for the object itself is this: if the M2 object has a direct analogue in R, it is parsed into that kind of R object and additional M2 properties are kept as metadata (attributes); if there is no direct analogue in R, the object is an <code>NA</code> with metadata.</p>
<p>Perhaps the easiest way to see this is with a matrix. <code><a href="reference/m2_matrix.html">m2_matrix()</a></code> creates a matrix on the M2 side from input on the R side. In the following, to make things more clear we use <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong>’s pipe operator</a>, with which the following calls are semantically equivalent: <code>g(f(x))</code> and <code>x %&gt;% f %&gt;% g</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</span>
<span id="cb22-2"><a href="#cb22-2"></a>mat &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb22-3"><a href="#cb22-3"></a>mat <span class="op">%&gt;%</span><span class="st"> </span>m2_matrix.   <span class="co"># = m2_matrix.(mat)</span></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co"># M2 Pointer Object</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co">#   ExternalString : map((ZZ)^3,(ZZ)^2,{{1, 4}, {2, 5}, {3, 6}})</span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="co">#          M2 Name : m2rintmatrix00000001</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">#         M2 Class : Matrix (Type)</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>mat <span class="op">%&gt;%</span><span class="st"> </span>m2_matrix. <span class="op">%&gt;%</span><span class="st"> </span>m2_parse</span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="co">#      [,1] [,2]</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co"># [1,]    1    4</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co"># [2,]    2    5</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co"># [3,]    3    6</span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="co"># M2 Matrix over ZZ[]</span></span>
<span id="cb22-14"><a href="#cb22-14"></a>mat <span class="op">%&gt;%</span><span class="st"> </span>m2_matrix. <span class="op">%&gt;%</span><span class="st"> </span>m2_parse <span class="op">%&gt;%</span><span class="st"> </span>str</span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co">#  'm2_matrix' int [1:3, 1:2] 1 2 3 4 5 6</span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="co">#  - attr(*, "m2_name")= chr "m2rintmatrix00000003"</span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co">#  - attr(*, "m2_meta")=List of 1</span></span>
<span id="cb22-18"><a href="#cb22-18"></a><span class="co">#   ..$ ring: 'm2_polynomialring' logi NA</span></span>
<span id="cb22-19"><a href="#cb22-19"></a><span class="co">#   .. ..- attr(*, "m2_name")= chr "ZZ"</span></span>
<span id="cb22-20"><a href="#cb22-20"></a><span class="co">#   .. ..- attr(*, "m2_meta")=List of 3</span></span>
<span id="cb22-21"><a href="#cb22-21"></a><span class="co">#   .. .. ..$ vars    : NULL</span></span>
<span id="cb22-22"><a href="#cb22-22"></a><span class="co">#   .. .. ..$ coefring: chr "ZZ"</span></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="co">#   .. .. ..$ order   : chr "grevlex"</span></span>
<span id="cb22-24"><a href="#cb22-24"></a>mat <span class="op">%&gt;%</span><span class="st"> </span>m2_matrix    <span class="co"># = m2_parse(m2_matrix.(mat))</span></span>
<span id="cb22-25"><a href="#cb22-25"></a><span class="co">#      [,1] [,2]</span></span>
<span id="cb22-26"><a href="#cb22-26"></a><span class="co"># [1,]    1    4</span></span>
<span id="cb22-27"><a href="#cb22-27"></a><span class="co"># [2,]    2    5</span></span>
<span id="cb22-28"><a href="#cb22-28"></a><span class="co"># [3,]    3    6</span></span>
<span id="cb22-29"><a href="#cb22-29"></a><span class="co"># M2 Matrix over ZZ[]</span></span></code></pre></div>
<p>It may be helpful to think of every <code>m2</code> object as being a missing value (<code>NA</code>, a <code><a href="https://rdrr.io/r/base/logical.html">logical(1)</a></code>) with two M2 attributes: their name (<code>m2_name</code>) and a capture-all named list (<code>m2_meta</code>). These can be accessed with <code><a href="reference/m2_utility.html">m2_name()</a></code> and <code><a href="reference/m2_utility.html">m2_meta()</a></code>. For example, a ring, having no analogous object in R, is an <code>NA</code> with attributes:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>r &lt;-<span class="st"> </span><span class="kw"><a href="reference/ring.html">ring</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="dt">coefring =</span> <span class="st">"QQ"</span>)</span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(r)</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="co">#  'm2_polynomialring' logi NA</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co">#  - attr(*, "m2_name")= chr "m2rintring00000006"</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="co">#  - attr(*, "m2_meta")=List of 3</span></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="co">#   ..$ vars    :List of 2</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co">#   .. ..$ : chr "x"</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="co">#   .. ..$ : chr "y"</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co">#   ..$ coefring: chr "QQ"</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co">#   ..$ order   : chr "grevlex"</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(r)</span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co"># [1] "m2_polynomialring" "m2"</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="kw"><a href="reference/m2_utility.html">m2_name</a></span>(r)</span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co"># [1] "m2rintring00000006"</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="kw"><a href="reference/m2_utility.html">m2_meta</a></span>(r)</span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="co"># $vars</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="co"># $vars[[1]]</span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="co"># [1] "x"</span></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="co"># </span></span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="co"># $vars[[2]]</span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="co"># [1] "y"</span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="co"># </span></span>
<span id="cb23-23"><a href="#cb23-23"></a><span class="co"># </span></span>
<span id="cb23-24"><a href="#cb23-24"></a><span class="co"># $coefring</span></span>
<span id="cb23-25"><a href="#cb23-25"></a><span class="co"># [1] "QQ"</span></span>
<span id="cb23-26"><a href="#cb23-26"></a><span class="co"># </span></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="co"># $order</span></span>
<span id="cb23-28"><a href="#cb23-28"></a><span class="co"># [1] "grevlex"</span></span></code></pre></div>
<p>But a matrix of integers isn’t:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>mat &lt;-<span class="st"> </span><span class="kw"><a href="reference/m2_matrix.html">m2_matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">2</span>))</span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(mat)</span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="co">#  'm2_matrix' num [1:3, 1:2] 1 2 3 4 5 6</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="co">#  - attr(*, "m2_name")= chr "m2rintmatrix00000005"</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="co">#  - attr(*, "m2_meta")=List of 1</span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co">#   ..$ ring: 'm2_polynomialring' logi NA</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co">#   .. ..- attr(*, "m2_name")= chr "ZZ"</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co">#   .. ..- attr(*, "m2_meta")=List of 3</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co">#   .. .. ..$ vars    : NULL</span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">#   .. .. ..$ coefring: chr "ZZ"</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="co">#   .. .. ..$ order   : chr "grevlex"</span></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(mat)</span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="co"># [1] "m2_matrix" "m2"        "matrix"</span></span>
<span id="cb24-14"><a href="#cb24-14"></a><span class="kw"><a href="reference/m2_utility.html">m2_name</a></span>(mat)</span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="co"># [1] "m2rintmatrix00000005"</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="kw"><a href="reference/m2_utility.html">m2_meta</a></span>(mat)</span>
<span id="cb24-17"><a href="#cb24-17"></a><span class="co"># $ring</span></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="co"># M2 Ring: ZZ[], grevlex order</span></span></code></pre></div>
<p>Since a matrix of integers is an object in R, it’s represented as one, and consequently we can compute with it directly as it if it were a matrix; it is. On the other hand, since a ring is not, it’s an <code>NA</code>. When dealing with M2, object like rings, that is to say objects without R analogues, are more common than those like integer matrices.</p>
</div>
<div id="creating-your-own-m2r-wrapper" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-your-own-m2r-wrapper" class="anchor"></a>Creating your own <strong>m2r</strong> wrapper</h2>
<p>We’ve already wrapped a number of Macaulay2 functions; for a list of functions in <strong>m2r</strong>, check out <code><a href="https://rdrr.io/r/base/ls.html">ls("package:m2r")</a></code>. But the list is very far from exhaustive. To create your own wrapper function of a Macaulay2 command, you’ll need to create an R file that looks like the one below. This will create both value (e.g. <code>f</code>) and reference/pointer (e.g. <code>f.</code>) versions of the function. As a good example of these at work, see the scripts for <a href="https://github.com/musicman3320/m2r/blob/master/R/factor_n.R"><code><a href="reference/factor_n.html">factor_n()</a></code></a> or <a href="https://github.com/musicman3320/m2r/blob/master/R/factor_poly.R"><code><a href="reference/factor_poly.html">factor_poly()</a></code></a>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">#' Function documentation header</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="co">#'</span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="co">#' Function header explanation, can run several lines. Function</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="co">#' header explanation, can run several lines. Function header</span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="co">#' explanation, can run several lines.</span></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="co">#'</span></span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="co">#' @param esntl_parm_1 esntl_parm_1 description</span></span>
<span id="cb25-8"><a href="#cb25-8"></a><span class="co">#' @param esntl_parm_2 esntl_parm_2 description</span></span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="co">#' @param code return only the M2 code? (default: \code{FALSE})</span></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="co">#' @param parse_parm_1 parse_parm_1 description</span></span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="co">#' @param parse_parm_2 parse_parm_2 description</span></span>
<span id="cb25-12"><a href="#cb25-12"></a><span class="co">#' @param ... ...</span></span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="co">#' @name f</span></span>
<span id="cb25-14"><a href="#cb25-14"></a><span class="co">#' @return (value version) parsed output or (reference/dot version)</span></span>
<span id="cb25-15"><a href="#cb25-15"></a><span class="co">#'   \code{m2_pointer}</span></span>
<span id="cb25-16"><a href="#cb25-16"></a><span class="co">#' @examples</span></span>
<span id="cb25-17"><a href="#cb25-17"></a><span class="co">#'</span></span>
<span id="cb25-18"><a href="#cb25-18"></a><span class="co">#' \dontrun{ requires Macaulay2 be installed</span></span>
<span id="cb25-19"><a href="#cb25-19"></a><span class="co">#'</span></span>
<span id="cb25-20"><a href="#cb25-20"></a><span class="co">#' # put examples here</span></span>
<span id="cb25-21"><a href="#cb25-21"></a><span class="co">#' 1 + 1</span></span>
<span id="cb25-22"><a href="#cb25-22"></a><span class="co">#'</span></span>
<span id="cb25-23"><a href="#cb25-23"></a><span class="co">#' }</span></span>
<span id="cb25-24"><a href="#cb25-24"></a><span class="co">#'</span></span>
<span id="cb25-25"><a href="#cb25-25"></a></span>
<span id="cb25-26"><a href="#cb25-26"></a></span>
<span id="cb25-27"><a href="#cb25-27"></a></span>
<span id="cb25-28"><a href="#cb25-28"></a></span>
<span id="cb25-29"><a href="#cb25-29"></a></span>
<span id="cb25-30"><a href="#cb25-30"></a><span class="co"># value version of f (standard user version)</span></span>
<span id="cb25-31"><a href="#cb25-31"></a><span class="co">#' @rdname f</span></span>
<span id="cb25-32"><a href="#cb25-32"></a><span class="co">#' @export</span></span>
<span id="cb25-33"><a href="#cb25-33"></a>f &lt;-<span class="st"> </span><span class="cf">function</span>(esntl_parm_<span class="dv">1</span>, esntl_parm_<span class="dv">2</span>, <span class="dt">code =</span> <span class="ot">FALSE</span>, parse_parm_<span class="dv">1</span>, parse_parm_<span class="dv">2</span>, ...) {</span>
<span id="cb25-34"><a href="#cb25-34"></a></span>
<span id="cb25-35"><a href="#cb25-35"></a>  <span class="co"># run m2</span></span>
<span id="cb25-36"><a href="#cb25-36"></a>  args &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/match.call.html">match.call</a></span>())[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb25-37"><a href="#cb25-37"></a>  eargs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(args, eval, <span class="dt">envir =</span> <span class="kw"><a href="https://rdrr.io/r/base/sys.parent.html">parent.frame</a></span>())</span>
<span id="cb25-38"><a href="#cb25-38"></a>  pointer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(f., eargs)</span>
<span id="cb25-39"><a href="#cb25-39"></a>  <span class="cf">if</span>(code) <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(pointer))</span>
<span id="cb25-40"><a href="#cb25-40"></a></span>
<span id="cb25-41"><a href="#cb25-41"></a>  <span class="co"># parse output</span></span>
<span id="cb25-42"><a href="#cb25-42"></a>  parsed_out &lt;-<span class="st"> </span><span class="kw"><a href="reference/m2_parser.html">m2_parse</a></span>(pointer)</span>
<span id="cb25-43"><a href="#cb25-43"></a></span>
<span id="cb25-44"><a href="#cb25-44"></a>  <span class="co"># more parsing, like changing classes and such</span></span>
<span id="cb25-45"><a href="#cb25-45"></a>  <span class="ot">TRUE</span></span>
<span id="cb25-46"><a href="#cb25-46"></a></span>
<span id="cb25-47"><a href="#cb25-47"></a>  <span class="co"># return</span></span>
<span id="cb25-48"><a href="#cb25-48"></a>  <span class="ot">TRUE</span></span>
<span id="cb25-49"><a href="#cb25-49"></a></span>
<span id="cb25-50"><a href="#cb25-50"></a>}</span>
<span id="cb25-51"><a href="#cb25-51"></a></span>
<span id="cb25-52"><a href="#cb25-52"></a></span>
<span id="cb25-53"><a href="#cb25-53"></a></span>
<span id="cb25-54"><a href="#cb25-54"></a></span>
<span id="cb25-55"><a href="#cb25-55"></a><span class="co"># reference version of f (returns pointer to m2 object)</span></span>
<span id="cb25-56"><a href="#cb25-56"></a><span class="co">#' @rdname f</span></span>
<span id="cb25-57"><a href="#cb25-57"></a><span class="co">#' @export</span></span>
<span id="cb25-58"><a href="#cb25-58"></a>f. &lt;-<span class="st"> </span><span class="cf">function</span>(esntl_parm_<span class="dv">1</span>, esntl_parm_<span class="dv">2</span>, <span class="dt">code =</span> <span class="ot">FALSE</span>, ...) {</span>
<span id="cb25-59"><a href="#cb25-59"></a></span>
<span id="cb25-60"><a href="#cb25-60"></a>  <span class="co"># basic arg checking</span></span>
<span id="cb25-61"><a href="#cb25-61"></a>  <span class="ot">TRUE</span></span>
<span id="cb25-62"><a href="#cb25-62"></a></span>
<span id="cb25-63"><a href="#cb25-63"></a>  <span class="co"># create essential parameters to pass to m2 this step regularizes input to m2, so it</span></span>
<span id="cb25-64"><a href="#cb25-64"></a>  <span class="co"># is the one that deals with pointers, chars, rings, ideals, mpolyLists, etc.</span></span>
<span id="cb25-65"><a href="#cb25-65"></a>  <span class="ot">TRUE</span></span>
<span id="cb25-66"><a href="#cb25-66"></a></span>
<span id="cb25-67"><a href="#cb25-67"></a>  <span class="co"># construct m2_code from regularized essential parameters</span></span>
<span id="cb25-68"><a href="#cb25-68"></a>  <span class="ot">TRUE</span></span>
<span id="cb25-69"><a href="#cb25-69"></a></span>
<span id="cb25-70"><a href="#cb25-70"></a>  <span class="co"># message</span></span>
<span id="cb25-71"><a href="#cb25-71"></a>  <span class="cf">if</span>(code) { <span class="kw"><a href="https://rdrr.io/r/base/message.html">message</a></span>(m2_code); <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(m2_code)) }</span>
<span id="cb25-72"><a href="#cb25-72"></a></span>
<span id="cb25-73"><a href="#cb25-73"></a>  <span class="co"># run m2 and return pointer</span></span>
<span id="cb25-74"><a href="#cb25-74"></a>  <span class="kw"><a href="reference/m2_call.html">m2.</a></span>(m2_code)</span>
<span id="cb25-75"><a href="#cb25-75"></a></span>
<span id="cb25-76"><a href="#cb25-76"></a>}</span></code></pre></div>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>This material is based upon work supported by the National Science Foundation under Grant Nos. <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1321794">1321794</a> and <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1622449">1622449</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Here’s how you can install the current <em>developmental</em> version of <strong>m2r</strong>. Remember you need to have <a href="http://www.math.uiuc.edu/Macaulay2/">Macaulay2</a> downloaded; <strong>m2r</strong> will look for it in your path variable (in the terminal, <code>echo $PATH</code>) as set by <code>~/.bash_profile</code> or, if nonexistent, then <code>~/.bashrc</code>, then <code>~/.profile</code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"coneill-math/m2r"</span>)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=m2r">https://​cloud.r-project.org/​package=m2r</a>
</li>
<li>Browse source code at <br><a href="https://github.com/coneill-math/m2r">https://​github.com/​coneill-math/​m2r</a>
</li>
<li>Report a bug at <br><a href="https://github.com/coneill-math/m2r/issues">https://​github.com/​coneill-math/​m2r/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing m2r</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>David Kahle <br><small class="roles"> Author, copyright holder, maintainer </small> <a href="https://orcid.org/0000-0002-9999-1558" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Christopher O'Neill <br><small class="roles"> Author, copyright holder </small>  </li>
<li>Jeff Sommars <br><small class="roles"> Author, copyright holder </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=m2r"><img src="http://www.r-pkg.org/badges/version/m2r" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.org/dkahle/m2r"><img src="https://travis-ci.org/dkahle/m2r.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/dkahle/m2r"><img src="https://ci.appveyor.com/api/projects/status/github/dkahle/m2r?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by David Kahle, Christopher O'Neill, Jeff Sommars.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
